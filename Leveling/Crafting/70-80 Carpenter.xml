<?xml version="1.0" encoding="UTF-8"?>
<!--
Authors:  Kayla / Angles24 
-->
<Profile>
  <Name>Crafting Carpenter to 80</Name>
	<Order>
	
		 <!-- Turn your shit in. -->
        <If Condition="HasIshgardItem() &gt; 0 and GetSkybuilderScrips() &lt; 9000">
			<RunCode Name="TurnIn"/>
        </If>
		
		<If Condition="GetSkybuilderScrips() &gt; 9000">
			<LogMessage Message="SkyBuilders' Scripts Full." />
			<RunCode Name="ScripFull"/>
			<StopBot/>
        </If>
		
		<!-- Skybuilders' Pedestal -->
		<If Condition="Core.Me.Levels[ClassJobType.Carpenter] &gt; 69 and  Core.Me.Levels[ClassJobType.Carpenter] &lt; 80 and FreeItemSlots() &gt; 15">
			<RunCode Name="Disable_Flight"/>
			<If Condition="ClassName != ClassJobType.Carpenter">
				<ChangeClass Job="Carpenter" />
			</If>		
			<If Condition="ClassName == ClassJobType.Carpenter">
				<AutoEquip UpdateGearSet="true"/>	
				<Lisbeth Json="[{'Group':1,'Item':28749,'Amount':15,'Enabled':true,'Type':'Carpenter','Collectable':false}]"/>
			</If> 
		</If>
		
		<!-- Turn your shit in. -->
        <If Condition="HasIshgardItem() &gt; 0 and GetSkybuilderScrips() &lt; 9000">
			<RunCode Name="TurnIn"/>
        </If>
		
		<If Condition="GetSkybuilderScrips() &gt; 9000">
			<LogMessage Message="SkyBuilders' Scripts Full." />
			<RunCode Name="ScripFull"/>
			<StopBot/>
        </If>
		
		<If Condition="Core.Me.Levels[ClassJobType.Carpenter] &lt; 80">
			<LLoadProfile Path="70-80 Carpenter.xml"/>
		</If>
		
		<LogMessage Message="Congrats on Level 80 on Carpenter, moving on." />
		<AutoEquip UpdateGearSet="true"/>
		<LLoadProfile Path="../Start.xml"/>
			
	</Order>
	
	<CodeChunks>
		<CodeChunk Name="TurnIn">
		<![CDATA[
			Logging.Write("[Handin] calling");
			await LlamaLibrary.IshgardHandinBase.Handin();
		]]>
		</CodeChunk>
		<CodeChunk Name="ScripFull">
		<![CDATA[
			Core.OverlayManager.AddToast(() => "SkyBuilder's Scrips Full.", TimeSpan.FromMilliseconds(25000), System.Windows.Media.Color.FromRgb(29,213,226), System.Windows.Media.Color.FromRgb(13,106,175), new System.Windows.Media.FontFamily("Gautami"));
			await Coroutine.Sleep(26000);
		]]>
		</CodeChunk>
		<CodeChunk Name="BagsFull">
		<![CDATA[
			Core.OverlayManager.AddToast(() => "Bags are Full please empty and hit start to continue.", TimeSpan.FromMilliseconds(25000), System.Windows.Media.Color.FromRgb(29,213,226), System.Windows.Media.Color.FromRgb(13,106,175), new System.Windows.Media.FontFamily("Gautami"));
			await Coroutine.Sleep(25000);
		]]>
		</CodeChunk>
		<CodeChunk Name="GoSwimming">
      <![CDATA[
        MovementManager.StartDescending();
        while (!MovementManager.IsDiving)  {  await Coroutine.Yield();  }
        while (CommonBehaviors.IsLoading)  {  await Coroutine.Yield();  }
        MovementManager.StopDescending();
        await Coroutine.Sleep(1000);
      ]]>
    </CodeChunk>
	<CodeChunk Name="Disable_Flight">
      <![CDATA[
        foreach (var plugin in PluginManager.Plugins.Where(p => p.Plugin.Name == "Enable Flight" || p.Plugin.Name == "启用飞行"))
        {
          try
          {
            if (!plugin.Enabled)  {  break;  }  else  {  plugin.Enabled = false;  }
          }
          catch (Exception ex) {  }
        }
      ]]>
    </CodeChunk>
	<CodeChunk Name="Enable_Flight">
      <![CDATA[
        foreach (var plugin in PluginManager.Plugins.Where(p => p.Plugin.Name == "Enable Flight" || p.Plugin.Name == "启用飞行"))
        {
          try
          {
            if (plugin.Enabled)  {  break;  }  else  {  plugin.Enabled = true;  }
          }
          catch (Exception ex) {  }
        }
      ]]>
    </CodeChunk>	
  </CodeChunks>
</Profile>