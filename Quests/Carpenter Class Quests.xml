<?xml version="1.0" encoding="utf-8"?>
<!--
Angles24
-->
<!DOCTYPE Profile [
<!-- Profile Settings -->
<!ENTITY meld "1"> 
 	 
<!--		Items required for meld setting being "0" [Level 20 Quest // Level 50 Quest]
			CRP - [Iron Lance (Materia Enhanced) // HQ Crab Bow (Melded with: Savage Aim Materia III)]
			BSM - [Iron Cross-Pein Hammer (Materia Enhanced) // HQ Cobalt Winglet (Melded with: Savage Might Materia III)]
			ARM - [Iron Hoplon (Materia-Enhanced) // HQ Cobalt Haubergeon (Melded with: Heavenâ€™s Eye III Materia)]
			GSM - [Staghorn Staff (Materia Enhanced) // HQ Black Pearl Ring (Melded with: Piety III Materia)]
			LTW - [Goatskin Leggings (Materia-Enhanced) // Raptorskin Jerkin (Melded with: Gatherers Grasp III Materia)]
			WVR - [Cotton Acton (Materia-enhanced) // None]
			ALC - [Engraved Hard Leather Grimoire (Materia Enhanced) // HQ Budding Rosewood Wand (Melded with: Quicktongue III Materia)]
			CUL - [None]
-->
]>
<Profile>
	<Name>Carpenter Class Quests</Name>
	<BehaviorDirectory>../Quest Behaviors</BehaviorDirectory>		
	<Order>	
	
	<!--<BotSettings BlockSkippingCutscenes="0"/>-->
	
	<If Condition="FreeItemSlots() &lt; 16">
		<LogMessage Message="Make Sure there is at least 25 or more free slots in your inventory then hit start on the bot." />
		<StopBot/>
	</If>
	
	<RunCode Name="SmallTalk"/>
	
	<If Condition="not IsQuestCompleted(67981)">
		<ChangeClass Job="Carpenter" />
		<WaitTimer WaitTime="2"/>	
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
	</If>
    <If Condition="ClassName == ClassJobType.Carpenter">
      <!-- The Lance's Lesson  (Level 20) -->
      <If Condition="IsQuestCompleted(65677) and not HasQuest(65678) and not IsQuestCompleted(65678) and Core.Player.ClassLevel &gt; 19">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(65678)">
          <PickupQuest QuestId="65678" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(65678) and not IsQuestCompleted(65678) and GetQuestStep(65678) == 255">
        <If Condition="not HasItem(1827)">
          <Lisbeth Json="[{'Item': 1827,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': false,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
		<If Condition="&meld; == 0">
		<If Condition="GetQuestStep(65678) == 255">
          <RunCode Name="Requires_Melding"/>
          <WaitWhile Condition="GetQuestStep(65678) == 255"/>
        </If>
		</If>
        <LLTurnIn QuestId="65678" ItemId="1827" AllowHq="True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- A Crisis of Confidence (Level 25) -->
      <If Condition="IsQuestCompleted(65678) and not HasQuest(65704) and not IsQuestCompleted(65704) and Core.Player.ClassLevel &gt; 24">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(65704)">
          <PickupQuest QuestId="65704" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(65704) and not IsQuestCompleted(65704) and GetQuestStep(65704) == 1">
        <GetTo ZoneId="132" XYZ="-77.95837, -3.695303, 53.08606"/>
        <TalkTo NpcId="1000162" XYZ="-77.95837, -3.695303, 53.08606" QuestId="65704" StepId="1"/>
      </If>
      <If Condition="HasQuest(65704) and not IsQuestCompleted(65704) and GetQuestStep(65704) == 255">
        <If Condition="not HasHqItem(5371)">
          <Lisbeth Json="[{'Item': 5371,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLTurnIn QuestId="65704" ItemId="5371" RequiresHq="True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Between Captain and Conjurer (Level 30) -->
      <If Condition="IsQuestCompleted(65704) and not HasQuest(65705) and not IsQuestCompleted(65705) and Core.Player.ClassLevel &gt; 29">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(65705)">
          <PickupQuest QuestId="65705" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(65705) and not IsQuestCompleted(65705) and GetQuestStep(65705) == 1">
        <If Condition="not HasHqItem(2015)">
          <Lisbeth Json="[{'Item': 2015,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLHandOver ItemId="2015" RequiresHq="True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="65705" StepId="1"/>
      </If>
      <If Condition="HasQuest(65705) and not IsQuestCompleted(65705) and GetQuestStep(65705) == 2">
        <GetTo ZoneId="132" XYZ="-56.26001, -0.5033983, -0.1679077"/>
        <LLHandOver ItemId="2015" RequiresHq="True" NpcId="1000125" XYZ="-56.26001, -0.5033983, -0.1679077" QuestId="65705" StepId="2"/>
      </If>
      <If Condition="HasQuest(65705) and not IsQuestCompleted(65705) and GetQuestStep(65705) == 3">
        <GetTo ZoneId="133" XYZ="-231.2325, -4, -7.087078"/>
        <LLHandOver ItemId="2015" RequiresHq="True" NpcId="1000235" XYZ="-231.2325, -4, -7.087078" QuestId="65705" StepId="3"/>
      </If>
      <If Condition="HasQuest(65705) and not IsQuestCompleted(65705) and GetQuestStep(65705) == 4">
        <GetTo ZoneId="132" XYZ="-56.26001, -0.5033983, -0.1679077"/>
        <TalkTo NpcId="1000125" XYZ="-56.26001, -0.5033983, -0.1679077" QuestId="65705" StepId="4"/>
      </If>
      <If Condition="HasQuest(65705) and not IsQuestCompleted(65705) and GetQuestStep(65705) == 255">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLTurnIn QuestId="65705" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Growing Apart (Level 35) -->
      <If Condition="IsQuestCompleted(65705) and not HasQuest(66072) and not IsQuestCompleted(66072) and Core.Player.ClassLevel &gt; 34">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(66072)">
          <PickupQuest QuestId="66072" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(66072) and not IsQuestCompleted(66072) and GetQuestStep(66072) == 1">
        <If Condition="not HasHqItem(1917)">
          <Lisbeth Json="[{'Item': 1917,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLHandOver ItemId="1917" RequiresHq="True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="66072" StepId="1"/>
      </If>
      <If Condition="HasQuest(66072) and not IsQuestCompleted(66072) and GetQuestStep(66072) == 2">
        <GetTo ZoneId="132" XYZ="-56.26001, -0.5033983, -0.1679077"/>
        <LLHandOver ItemId="1917" RequiresHq="True" NpcId="1000125" XYZ="-56.26001, -0.5033983, -0.1679077" QuestId="66072" StepId="2"/>
      </If>
      <If Condition="HasQuest(66072) and not IsQuestCompleted(66072) and GetQuestStep(66072) == 255">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLTurnIn QuestId="66072" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Memento Mori (Level 40) -->
      <If Condition="IsQuestCompleted(66072) and not HasQuest(66073) and not IsQuestCompleted(66073) and Core.Player.ClassLevel &gt; 39">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(66073)">
          <PickupQuest QuestId="66073" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(66073) and not IsQuestCompleted(66073) and GetQuestStep(66073) == 1">
        <If Condition="not HasHqItem(1925)">
          <Lisbeth Json="[{'Item': 1925,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLHandOver ItemId="1925" RequiresHq="True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="66073" StepId="1"/>
      </If>
      <If Condition="HasQuest(66073) and not IsQuestCompleted(66073) and GetQuestStep(66073) == 2">
        <GetTo ZoneId="132" XYZ="-56.26001, -0.5033983, -0.1679077"/>
        <LLHandOver ItemId="1925" RequiresHq="True" NpcId="1000125" XYZ="-56.26001, -0.5033983, -0.1679077" QuestId="66073" StepId="2"/>
      </If>
      <If Condition="HasQuest(66073) and not IsQuestCompleted(66073) and GetQuestStep(66073) == 255">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLTurnIn QuestId="66073" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Gone till the Sixth Astral Moon (Level 45) -->
      <If Condition="IsQuestCompleted(66073) and not HasQuest(66074) and not IsQuestCompleted(66074) and Core.Player.ClassLevel &gt; 44">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(66074)">
          <PickupQuest QuestId="66074" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(66074) and not IsQuestCompleted(66074) and GetQuestStep(66074) == 1">
        <GetTo ZoneId="132" XYZ="-77.95837, -3.695303, 53.08606"/>
        <TalkTo NpcId="1000162" XYZ="-77.95837, -3.695303, 53.08606" QuestId="66074" StepId="1"/>
      </If>
      <If Condition="HasQuest(66074) and not IsQuestCompleted(66074) and GetQuestStep(66074) == 2">
        <GetTo ZoneId="132" XYZ="-56.26001, -0.5033983, -0.1679077"/>
        <TalkTo NpcId="1000125" XYZ="-56.26001, -0.5033983, -0.1679077" QuestId="66074" StepId="2"/>
      </If>
      <If Condition="HasQuest(66074) and not IsQuestCompleted(66074) and GetQuestStep(66074) == 3">
        <If Condition="not HasHqItem(1937)">
          <Lisbeth Json="[{'Item': 1937,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <If Condition="not HasHqItem(1862)">
          <Lisbeth Json="[{'Item': 1862,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <If Condition="not HasHqItem(2039)">
          <Lisbeth Json="[{'Item': 2039,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLHandOver ItemIds="1937, 1862, 2039" RequiresHq="True, True, True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="66074" StepId="3"/>
      </If>
      <If Condition="HasQuest(66074) and not IsQuestCompleted(66074) and GetQuestStep(66074) == 4">
        <GetTo ZoneId="132" XYZ="-56.26001, -0.5033983, -0.1679077"/>
        <LLHandOver ItemIds="1937,1862,2039" RequiresHq="True, True, True" NpcId="1000125" XYZ="-56.26001, -0.5033983, -0.1679077" QuestId="66074" StepId="4"/>
      </If>
      <If Condition="HasQuest(66074) and not IsQuestCompleted(66074) and GetQuestStep(66074) == 255">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLTurnIn QuestId="66074" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Saving Captain Gairhard (Level 50) -->
      <If Condition="IsQuestCompleted(66074) and not HasQuest(66075) and not IsQuestCompleted(66075) and Core.Player.ClassLevel &gt; 49">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(66075)">
          <PickupQuest QuestId="66075" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(66075) and not IsQuestCompleted(66075) and GetQuestStep(66075) == 1">
        <GetTo ZoneId="132" XYZ="-77.95837, -3.695303, 53.08606"/>
        <TalkTo NpcId="1000162" InteractDistance="2" UseMesh="True" XYZ="-77.95837, -3.695303, 53.08606"/>
      </If>
      <If Condition="HasQuest(66075) and not IsQuestCompleted(66075) and GetQuestStep(66075) == 2">
        <If Condition="not HasHqItem(5376)">
          <Lisbeth Json="[{'Item': 5376,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLHandOver ItemId="5376" RequireHq="True" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="66075" StepId="2"/>
      </If>
      <If Condition="HasQuest(66075) and not IsQuestCompleted(66075) and GetQuestStep(66075) == 3">
        <If Condition="not HasHqItem(1942)">
          <Lisbeth Json="[{'Item': 1942,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="154" XYZ="162.005, -27.84127, 309.9564"/>
		<If Condition="&meld; == 0">
		<If Condition="GetQuestStep(66075) == 3">
          <RunCode Name="Requires_Melding"/>
          <WaitWhile Condition="GetQuestStep(66075) == 3"/>
        </If>
		</If>
        <LLHandOver ItemId="1942" RequireHq="True" NpcId="1003072" XYZ="162.005, -27.84127, 309.9564" QuestId="66075" StepId="3"/>
      </If>
      <If Condition="HasQuest(66075) and not IsQuestCompleted(66075) and GetQuestStep(66075) == 255">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <LLTurnIn QuestId="66075" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" RewardSlot="3"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Lance of a Lifetime (Level 50) -->
      <If Condition="IsQuestCompleted(66075) and not HasQuest(67533) and not IsQuestCompleted(67533) and Core.Player.ClassLevel &gt; 49">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <If Condition="IsQuestAcceptQualified(67533)">
          <PickupQuest QuestId="67533" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(67533) and not IsQuestCompleted(67533) and GetQuestStep(67533) == 1">
        <GetTo ZoneId="418" XYZ="108.2627, 24.38417, 12.06982"/>
        <LLHandOver ItemId="2001681" NpcId="1012499" XYZ="108.2627, 24.38417, 12.06982" QuestId="67533" StepId="1"/>
      </If>
      <If Condition="HasQuest(67533) and not IsQuestCompleted(67533) and GetQuestStep(67533) == 255">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLTurnIn QuestId="67533" ItemId="2001681" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- A-hunting He Will Go (Level 53) -->
      <If Condition="IsQuestCompleted(67533) and not HasQuest(67534) and not IsQuestCompleted(67534) and Core.Player.ClassLevel &gt; 52">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <If Condition="IsQuestAcceptQualified(67534)">
          <PickupQuest QuestId="67534" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135"/>
        </If>
      </If>
      <If Condition="HasQuest(67534) and not IsQuestCompleted(67534) and GetQuestStep(67534) == 1">
        <If Condition="not HasHqItem(10611)">
          <Lisbeth Json="[{'Item': 10611,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLHandOver ItemId="10611" RequiresHq="True" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135" QuestId="67534" StepId="1"/>
      </If>
      <If Condition="HasQuest(67534) and not IsQuestCompleted(67534) and GetQuestStep(67534) == 2">
        <GetTo ZoneId="418" XYZ="-141.558, 19.06319, -13.26007"/>
        <TalkTo NpcId="1012501" XYZ="-141.558, 19.06319, -13.26007" QuestId="67534" StepId="2"/>
      </If>
      <If Condition="HasQuest(67534) and not IsQuestCompleted(67534) and GetQuestStep(67534) == 255">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLTurnIn QuestId="67534" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135" RewardSlot="4"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Ministers Of Grace Defend Him (Level 55) -->
      <If Condition="IsQuestCompleted(67534) and not HasQuest(67535) and not IsQuestCompleted(67535) and Core.Player.ClassLevel &gt; 54">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <If Condition="IsQuestAcceptQualified(67535)">
          <PickupQuest QuestId="67535" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135"/>
        </If>
      </If>
      <If Condition="HasQuest(67535) and not IsQuestCompleted(67535) and GetQuestStep(67535) == 1">
        <GetTo ZoneId="418" XYZ="-30.6554, 5.504704, 23.72772"/>
        <TalkTo NpcId="1012502" XYZ="-30.6554, 5.504704, 23.72772" QuestId="67535" StepId="1"/>
      </If>
      <If Condition="HasQuest(67535) and not IsQuestCompleted(67535) and GetQuestStep(67535) == 2">
        <If Condition="not HasHqItem(10636)">
          <Lisbeth Json="[{'Item': 10636,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="418" XYZ="-30.6554, 5.504704, 23.72772"/>
        <LLHandOver ItemId="10636" RequiresHq="True" NpcId="1012502" XYZ="-30.6554, 5.504704, 23.72772" QuestId="67535" StepId="2"/>
      </If>
      <If Condition="HasQuest(67535) and not IsQuestCompleted(67535) and GetQuestStep(67535) == 255">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLTurnIn QuestId="67535" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135" RewardSlot="4"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- The Son Also Rises (Level 57) -->
      <If Condition="IsQuestCompleted(67535) and not HasQuest(67536) and not IsQuestCompleted(67536) and Core.Player.ClassLevel &gt; 56">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <If Condition="IsQuestAcceptQualified(67536)">
          <PickupQuest QuestId="67536" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135"/>
        </If>
      </If>
      <If Condition="HasQuest(67536) and not IsQuestCompleted(67536) and GetQuestStep(67536) == 1">
        <GetTo ZoneId="418" XYZ="-138.0484, 5.467082, 34.86682"/>
        <TalkTo NpcId="1012505" XYZ="-138.0484, 5.467082, 34.86682" QuestId="67536" StepId="1"/>
      </If>
      <If Condition="HasQuest(67536) and not IsQuestCompleted(67536) and GetQuestStep(67536) == 2">
        <GetTo ZoneId="132" XYZ="-44.87683, -1.250002, 56.83984"/>
        <TalkTo NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="67536" StepId="2"/>
      </If>
      <If Condition="HasQuest(67536) and not IsQuestCompleted(67536) and GetQuestStep(67536) == 3">
        <GetTo ZoneId="155" XYZ="115.3429, 287.0294, 142.1377"/>
        <TalkTo NpcId="1000776" XYZ="115.3429, 287.0294, 142.1377" QuestId="67536" StepId="3"/>
      </If>
      <If Condition="HasQuest(67536) and not IsQuestCompleted(67536) and GetQuestStep(67536) == 255">
        <If Condition="not HqHasAtLeast(12583,3)">
          <Lisbeth Json="[{'Item': 12583,'Group': 0,'Amount': 3,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLTurnIn QuestId="67536" ItemId="12583" RequireHq="True" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- More Fierce than Fire (Level 60) -->
      <If Condition="IsQuestCompleted(67536) and not HasQuest(67537) and not IsQuestCompleted(67537) and Core.Player.ClassLevel &gt; 59">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <If Condition="IsQuestAcceptQualified(67537)">
          <PickupQuest QuestId="67537" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135"/>
        </If>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 1">
        <GetTo ZoneId="397" XYZ="-294.5449, 125.4943, -18.6618"/>
        <TalkTo NpcId="1013596" XYZ="-294.5449, 125.4943, -18.6618" QuestId="67537" StepId="1"/>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 2">
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLHandOver ItemId="2001682" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135" QuestId="67537" StepId="2"/>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 3">
        <If Condition="not HasItem(10609)">
          <Lisbeth Json="[{'Item': 10609,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': false,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="418" XYZ="96.57422, -20.02087, 64.7135"/>
        <LLHandOver ItemId="10609" AllowHq="True" NpcId="1012498" XYZ="96.57422, -20.02087, 64.7135" QuestId="67537" StepId="3"/>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 4">
        <GetTo ZoneId="418" XYZ="-138.0484, 5.467082, 34.86682"/>
        <TalkTo NpcId="1012505" XYZ="-138.0484, 5.467082, 34.86682" QuestId="67537" StepId="4"/>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 5">
        <GetTo ZoneId="397" XYZ="-270.0085, 80.85996, -350.6066"/>
        <TalkTo NpcId="1013597" XYZ="-270.0085, 80.85996, -350.6066" QuestId="67537" StepId="5"/>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 6">
        <GetTo ZoneId="397" XYZ="-270.0085, 80.85996, -350.6066"/>
		<Dismount/>
        <TalkTo NpcId="1013600" XYZ="-270.0085, 80.85996, -350.6066" QuestId="67537" StepId="6"/>
      </If>
      <If Condition="HasQuest(67537) and not IsQuestCompleted(67537) and GetQuestStep(67537) == 255">
	    <GetTo ZoneId="397" XYZ="542.2294, 176.8043, -554.4976"/>
        <LLTurnIn QuestId="67537" NpcId="1013686" XYZ="542.2294, 176.8043, -554.4976"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Uncharted Territory (Level 60) -->
      <If Condition="IsQuestCompleted(67537) and not HasQuest(67977) and not IsQuestCompleted(67977) and Core.Player.ClassLevel &gt; 59">
        <GetTo ZoneId="132" XYZ="-45.0408, -1.250016, 58.37101"/>
        <If Condition="IsQuestAcceptQualified(67977)">
          <PickupQuest QuestId="67977" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(67977) and not IsQuestCompleted(67977) and GetQuestStep(67977) == 1">
        <GetTo ZoneId="132" XYZ="-22.00138, -3.25, 35.37772"/>
        <TalkTo NpcId="1020901" XYZ="-22.87329, -3.25, 35.20251" QuestId="67977" StepId="1"/>
      </If>
      <If Condition="HasQuest(67977) and not IsQuestCompleted(67977) and GetQuestStep(67977) == 2 and GetQuestById(67977).GetTodoArgs(2, 0).Item1 == 0">
        <GetTo ZoneId="132" XYZ="30.89977, -8, 111.3071"/>
        <TalkTo NpcId="1000384" XYZ="30.80798, -8, 112.2301" QuestId="67977"/>
      </If>
      <If Condition="HasQuest(67977) and not IsQuestCompleted(67977) and GetQuestStep(67977) == 2 and GetQuestById(67977).GetTodoArgs(2, 0).Item1 == 1">
        <GetTo ZoneId="132" XYZ="33.73767, -8, 118.5474"/>
        <TalkTo NpcId="1000139" XYZ="33.73767, -8, 118.5474" QuestId="67977"/>
      </If>
      <If Condition="HasQuest(67977) and not IsQuestCompleted(67977) and GetQuestStep(67977) == 2 and GetQuestById(67977).GetTodoArgs(2, 0).Item1 == 2">
        <GetTo ZoneId="132" XYZ="34.2773, -18.8, 95.46662"/>
        <TalkTo NpcId="1000140" XYZ="33.58508, -18.81439, 94.49902" QuestId="67977"/>
      </If>
      <If Condition="HasQuest(67977) and not IsQuestCompleted(67977) and GetQuestStep(67977) == 3">
        <GetTo ZoneId="132" XYZ="26.31469, -8, 102.1364"/>
        <TalkTo NpcId="1020902" XYZ="25.46729, -8, 102.037" QuestId="67977" StepId="3"/>
      </If>
      <If Condition="HasQuest(67977) and not IsQuestCompleted(67977) and GetQuestStep(67977) == 255">
        <GetTo ZoneId="132" XYZ="-45.10997, -1.250017, 57.86028"/>
        <LLTurnIn QuestId="67977" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- The Game of Confidence (Level 63) -->
      <If Condition="IsQuestCompleted(67977) and not HasQuest(67978) and not IsQuestCompleted(67978) and Core.Player.ClassLevel &gt; 62">
        <GetTo ZoneId="132" XYZ="-45.10997, -1.250017, 57.86028"/>
        <If Condition="IsQuestAcceptQualified(67978)">
          <PickupQuest QuestId="67978" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        </If>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 1">
        <GetTo ZoneId="628" XYZ="-46.4557, 3.013504, -69.9194"/>
        <TalkTo NpcId="1020903" XYZ="-46.95203, 3.013504, -69.0166" QuestId="67978" StepId="1"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 2">
        <GetTo ZoneId="628" XYZ="44.50636, 4.000001, 85.82306"/>
        <TalkTo NpcId="1020904" XYZ="45.48706, 4.000001, 85.34363" QuestId="67978" StepId="2"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 3 and GetQuestById(67978).GetTodoArgs(3, 0).Item1 == 0">
        <GetTo ZoneId="628" XYZ="31.49495, 4.000001, 52.55272"/>
        <TalkTo NpcId="1020906" XYZ="31.44885, 4.000001, 51.80432" QuestId="67978"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 3 and GetQuestById(67978).GetTodoArgs(3, 0).Item1 == 1">
        <GetTo ZoneId="628" XYZ="54.80767, 4, 69.25572"/>
        <TalkTo NpcId="1020907" XYZ="55.00867, 4.05, 69.84058" QuestId="67978"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 3 and GetQuestById(67978).GetTodoArgs(3, 0).Item1 == 2">
        <GetTo ZoneId="628" XYZ="74.19947, 4, 54.21334"/>
        <TalkTo NpcId="1020908" XYZ="75.45581, 4.05, 52.90295" QuestId="67978"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 4">
        <GetTo ZoneId="628" XYZ="-46.50515, 3.013504, -70.01102"/>
        <SoTalkTo NpcId="1020903" XYZ="-46.95203, 3.013504, -69.0166" QuestId="67978" StepId="4" DialogOption="1"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 5">
        <If Condition="not HasHqItem(17878)">
          <Lisbeth Json="[{'Item': 17878,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="628" XYZ="-47.7025, 3.013503, -74.11468"/>
        <LLHandOver ItemId="17878" RequireHq="True" NpcId="1020909" XYZ="-46.40277, 3.013503, -74.72345" QuestId="67978" StepId="5"/>
      </If>
      <If Condition="HasQuest(67978) and not IsQuestCompleted(67978) and GetQuestStep(67978) == 255">
        <GetTo ZoneId="628" XYZ="-46.65266, 3.013504, -69.99533"/>
        <LLTurnIn QuestId="67978" NpcId="1020903" XYZ="-46.95203, 3.013504, -69.0166" RewardSlot="4"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- A Lesson in Listening (Level 65) -->
      <If Condition="IsQuestCompleted(67978) and not HasQuest(67979) and not IsQuestCompleted(67979) and Core.Player.ClassLevel &gt; 64">
        <GetTo ZoneId="628" XYZ="-46.65266, 3.013504, -69.99533"/>
        <If Condition="IsQuestAcceptQualified(67979)">
          <PickupQuest QuestId="67979" NpcId="1020903" XYZ="-46.95203, 3.013504, -69.0166"/>
        </If>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 1">
        <GetTo ZoneId="628" XYZ="-1.756881, 4.768372E-07, -77.39175"/>
        <TalkTo NpcId="1020910" XYZ="-1.175049, 1.266599E-07, -78.04993" QuestId="67979" StepId="1"/>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 2 and GetQuestById(67979).GetTodoArgs(2, 0).Item1 == 0">
        <GetTo ZoneId="628" XYZ="-12.33821, 7.152557E-07, -85.17715"/>
        <TalkTo NpcId="1020912" XYZ="-13.07703, 0.25, -86.22876" QuestId="67979"/>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 2 and GetQuestById(67979).GetTodoArgs(2, 0).Item1 == 1">
        <GetTo ZoneId="628" XYZ="1.974976, 0, -68.85121"/>
        <TalkTo NpcId="1019063" XYZ="3.341675, 7.450581E-09, -67.73486" QuestId="67979"/>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 2 and GetQuestById(67979).GetTodoArgs(2, 0).Item1 == 2">
        <GetTo ZoneId="628" XYZ="10.14571, 0, -75.16724"/>
        <TalkTo NpcId="1019062" XYZ="9.506287, 0, -76.12726" QuestId="67979"/>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 3">
        <GetTo ZoneId="628" XYZ="-45.9142, 3.013504, -69.86348"/>
        <SoTalkTo NpcId="1020903" XYZ="-46.95203, 3.013504, -69.0166" QuestId="67979" StepId="3" DialogOption="2"/>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 4">
        <If Condition="not HasHqItem(17880)">
          <Lisbeth Json="[{'Item': 17880,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="628" XYZ="-0.6076822, -1.192093E-07, -78.38664"/>
        <LLHandOver ItemId="17880" RequireHq="True" NpcId="1019061" XYZ="-0.04577637, 0, -80.8576" QuestId="67979" StepId="4"/>
      </If>
      <If Condition="HasQuest(67979) and not IsQuestCompleted(67979) and GetQuestStep(67979) == 255">
        <GetTo ZoneId="628" XYZ="-50.98821, -2.9, -51.92702"/>
        <LLTurnIn QuestId="67979" NpcId="1020994" XYZ="-51.89594, -2.9, -50.91937" RewardSlot="4"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Live and Let Dine (Level 68) -->
      <If Condition="IsQuestCompleted(67979) and not HasQuest(67980) and not IsQuestCompleted(67980) and Core.Player.ClassLevel &gt; 67">
        <GetTo ZoneId="628" XYZ="-48.06082, -2.9, -52.78751"/>
        <If Condition="IsQuestAcceptQualified(67980)">
          <PickupQuest QuestId="67980" NpcId="1019002" XYZ="-48.05072, -2.9, -50.24799"/>
        </If>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 1">
        <GetTo ZoneId="614" XYZ="480.8924, 57.41007, -167.5075"/>
        <TalkTo NpcId="1020913" XYZ="480.949, 57.51844, -168.4749" QuestId="67980" StepId="1"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 2">
        <GetTo ZoneId="614" XYZ="466.0222, 68.22433, -119.8152"/>
        <TalkTo NpcId="1019279" XYZ="466.4835, 68.22433, -120.7447" QuestId="67980" StepId="2"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 3 and GetQuestById(67980).GetTodoArgs(3, 0).Item1 == 0">
        <GetTo ZoneId="614" XYZ="467.596, 68.02505, -94.73309"/>
        <TalkTo NpcId="1019257" XYZ="468.5587, 68.02771, -93.21747" QuestId="67980"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 3 and GetQuestById(67980).GetTodoArgs(3, 0).Item1 == 1">
        <GetTo ZoneId="614" XYZ="394.8227, 72.07918, -83.17698"/>
        <TalkTo NpcId="1019256" XYZ="394.7356, 72.07918, -81.77313" QuestId="67980"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 3 and GetQuestById(67980).GetTodoArgs(3, 0).Item1 == 2">
        <GetTo ZoneId="614" XYZ="369.4804, 84.94711, -201.8471"/>
        <TalkTo NpcId="1019258" XYZ="368.4595, 85.00467, -202.8077" QuestId="67980"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 4">
        <GetTo ZoneId="614" XYZ="481.0121, 57.41946, -167.716"/>
        <SoTalkTo NpcId="1020913" XYZ="480.949, 57.51844, -168.4749" QuestId="67980" StepId="4" DialogOption="2"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 5">
        <If Condition="not HasHqItem(17882)">
          <Lisbeth Json="[{'Item': 17882,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="614" XYZ="466.6603, 68.22433, -119.884"/>
        <LLHandOver ItemId="17882" RequiresHq="True" NpcId="1019279" XYZ="466.4835, 68.22433, -120.7447" QuestId="67980" StepId="5"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 6">
        <GetTo ZoneId="132" XYZ="-11.86295, -3.25, 35.07083"/>
        <WaitWhile Condition="HasQuest(67980) and not IsQuestCompleted(67980) and not GetQuestStep(67980) == 255"/>
      </If>
      <If Condition="HasQuest(67980) and not IsQuestCompleted(67980) and GetQuestStep(67980) == 255">
        <GetTo ZoneId="132" XYZ="-22.08097, -3.25, 35.43846"/>
        <LLTurnIn QuestId="67980" NpcId="1020901" XYZ="-22.87329, -3.25, 35.20251"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
      <!-- Tea Party Rules (Level 70) -->
      <If Condition="IsQuestCompleted(67980) and not HasQuest(67981) and not IsQuestCompleted(67981) and Core.Player.ClassLevel &gt; 69">
        <GetTo ZoneId="132" XYZ="-22.18031, -3.25, 35.30078"/>
        <If Condition="IsQuestAcceptQualified(67981)">
          <PickupQuest QuestId="67981" NpcId="1020901" XYZ="-22.87329, -3.25, 35.20251"/>
        </If>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 1">
        <GetTo ZoneId="132" XYZ="-44.8852, -1.250004, 57.72015"/>
        <TalkTo NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="67981" StepId="1"/>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 2">
        <GetTo ZoneId="132" XYZ="-68.87189, -1.963174, 22.31291"/>
        <TalkTo NpcId="1020917" XYZ="-69.47443, -1.903866, 22.75116" QuestId="67981" StepId="2"/>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 3">
        <GetTo ZoneId="133" XYZ="-146.9552, 7.680779, -132.6617"/>
        <TalkTo NpcId="1020918" XYZ="-147.6616, 7.702551, -132.2805" QuestId="67981" StepId="3"/>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 4">
        <GetTo ZoneId="132" XYZ="-45.05016, -1.250016, 57.89428"/>
        <SoTalkTo NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984" QuestId="67981" StepId="4" DialogOption="1"/>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 5">
        <If Condition="not HasHqItem(17884)">
          <Lisbeth Json="[{'Item': 17884,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': true,'Food': 0,'Primary': true,'Type': 'Carpenter','Enabled': true,'Manual': 0,'Medicine': 0}]"/>
        </If>
        <GetTo ZoneId="132" XYZ="-46.23624, -1.250003, 54.72165"/>
        <LLHandOver ItemId="17884" RequireHq="True" NpcId="1020916" XYZ="-45.76184, -1.250005, 53.91003" QuestId="67981" StepId="5"/>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 6">
        <GetTo ZoneId="133" XYZ="-33.32317, 10.30855, -249.344"/>
        <TalkTo NpcId="1020920" XYZ="-32.02869, 10.20999, -249.1035" QuestId="67981" StepId="6"/>
      </If>
      <If Condition="HasQuest(67981) and not IsQuestCompleted(67981) and GetQuestStep(67981) == 255">
        <GetTo ZoneId="132" XYZ="-45.06167, -1.250014, 57.76295"/>
        <LLTurnIn QuestId="67981" NpcId="1000153" XYZ="-44.87683, -1.250002, 56.83984"/>
        <WaitTimer WaitTime="2"/>
		<RunCode Name="SmallTalk"/>	
		<RunCode Name="AutoEquip" />						  
		<RunCode Name="UpdateGearSet"/>	
        <WaitTimer WaitTime="2"/>
      </If>
    </If>
	
	<ALoadProfile Path="../Start.xml"/>
	
	</Order>
	<CodeChunks>
		<CodeChunk Name="SmallTalk">
			<![CDATA[ 
			    if (SelectString.IsOpen)
				SelectString.ClickSlot((uint) (SelectString.LineCount - 1));
			]]>
		</CodeChunk>
		<CodeChunk Name="AutoEquip">
            <![CDATA[ 
            var patternFinder = new GreyMagic.PatternFinder(Core.Memory);
            IntPtr agentVtable = patternFinder.Find("48 8D 05 ? ? ? ? C6 43 ? ? 48 89 03 48 8B C3 C7 43 ? ? ? ? ? Add 3 TraceRelative");
            int id = AgentModule.FindAgentIdByVtable(agentVtable);

            AtkAddonControl windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");

            if (windowByName == null)
            {
                AgentModule.GetAgentInterfaceById(id).Toggle();
            }

            await Coroutine.Wait(10000, () => RaptureAtkUnitManager.GetWindowByName("RecommendEquip") != null);
            
            windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");
            
            if (windowByName != null)
            {
                windowByName.SendAction(1, 3, 0);
            }
			
			await Coroutine.Sleep(2000);					
           		
            ]]>
        </CodeChunk>
		<CodeChunk Name="UpdateGearSet">
		<![CDATA[ 
		   var patternFinder = new GreyMagic.PatternFinder(Core.Memory);
            IntPtr agentCharVtable = patternFinder.Find("48 8D 05 ? ? ? ? 89 77 ? Add 3 TraceRelative");
			int idChar = AgentModule.FindAgentIdByVtable(agentCharVtable);

			AtkAddonControl windowByName = RaptureAtkUnitManager.GetWindowByName("Character");

			if (windowByName == null)
			{
				AgentModule.GetAgentInterfaceById(idChar).Toggle();
			}

			await Coroutine.Wait(5000, () => RaptureAtkUnitManager.GetWindowByName("Character") != null);

			windowByName = RaptureAtkUnitManager.GetWindowByName("Character");

			if (windowByName != null)
			{
				windowByName.SendAction(1, 3, 0xF);
			}
            
            await Coroutine.Wait(1000, () => SelectYesno.IsOpen);

            if (SelectYesno.IsOpen)
                SelectYesno.Yes();

			await Coroutine.Wait(1000, () => !SelectYesno.IsOpen);
			
            await Coroutine.Sleep(200);
			
			windowByName = RaptureAtkUnitManager.GetWindowByName("Character");

			if (windowByName != null)
			{
				AgentModule.GetAgentInterfaceById(idChar).Toggle();
			}
			
			]]>
		</CodeChunk>
    <CodeChunk Name="Requires_Melding">
		<![CDATA[
        Core.OverlayManager.AddToast(() => "Please complete the current quest step manually.", TimeSpan.FromMilliseconds(25000), System.Windows.Media.Color.FromRgb(29,213,226), System.Windows.Media.Color.FromRgb(13,106,175), new System.Windows.Media.FontFamily("Gautami"));
        await Coroutine.Sleep(26000);
      ]]>
	  </CodeChunk>
    <CodeChunk Name="Move_Forward"><![CDATA[
        await Coroutine.Sleep(500);
        MovementManager.SetFacing(3.76f);
        await Coroutine.Sleep(500);
        MovementManager.MoveForwardStart();
        await Coroutine.Sleep(3000);
        MovementManager.MoveStop();
        await Coroutine.Sleep(500);
      ]]></CodeChunk>
	</CodeChunks>
</Profile>